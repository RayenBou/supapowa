{% extends 'base.html.twig' %}

{% block title %}Product
{% endblock %}
{% block javascripts %}
	{{parent()}}

	<script>
		// Fonction pour attendre que le DOM soit complètement chargé
document.addEventListener('DOMContentLoaded', function () {
const modal = document.getElementById('imageModal');
const modalImage = document.getElementById('modalImage');
const closeModal = document.getElementById('closeModal');

const productImages = document.querySelectorAll('[data-image]');

productImages.forEach((image) => {
image.addEventListener('click', () => {
const imageURL = image.getAttribute('data-image');
modalImage.src = imageURL;
modal.classList.remove('hidden');
});
});

closeModal.addEventListener('click', () => {
modal.classList.add('hidden');
});
});
	</script>


{% endblock %}

{% block body %}

	<div class="bg-gray-100 flex items-center justify-center h-screen">
		<div class=" shadow-lg rounded-lg overflow-hidden h-full w-full  flex">

			<div
				class="bg-white shadow-lg rounded-lg overflow-hidden w-full md:w-3/4 lg:w-2/3 xl:w-1/2 flex">
				<!-- J'ai ajouté la classe w-full pour occuper toute la largeur -->

				<div
					class="w-full h-full flex flex-col">
					<!-- Grande image -->
					<div class="w-full h-3/4 rounded-lg bg-gray-100 mb-4 flex items-center justify-center">
						<img src="{{ asset('photo/product/' ~ product.photo[0].reference) }}" alt="Product Image" data-image="{{ asset('photo/product/' ~ product.photo[0].reference) }}" class="cursor-pointer">
					</div>

					<!-- Petites images carrées -->
					<div class="flex space-x-4">
						{% for pic in product.photo|slice(1) %}
							<div class="w-1/4 h-1/4 rounded-lg bg-gray-100 flex items-center justify-center">
								<img src="{{ asset('photo/product/' ~ pic.reference) }}" alt="Product Image" data-image="{{ asset('photo/product/' ~ pic.reference) }}" class="cursor-pointer">
							</div>
						{% endfor %}
					</div>
				</div>
			</div>

			<!-- Informations sur le produit et bouton "Ajouter au panier" (à droite) -->
			<div class="w-1/2 p-6">
				<h2 class="text-2xl font-semibold text-gray-800 mb-2">{{ product.name}}</h2>
				<p class="text-gray-500 text-sm">By
					<a href="#" class="text-indigo-600 hover:underline">ABC Company</a>
				</p>

				<div class="flex items-center space-x-4 my-4">
					<div>
						<div class="rounded-lg bg-gray-100 flex py-2 px-3">
							<span class="text-indigo-400 mr-1 mt-1">$</span>
							<span class="font-bold text-indigo-600 text-3xl">25</span>
						</div>
					</div>
					<div class="flex-1">
						<p class="text-green-500 text-xl font-semibold">Save 12%</p>
						<p class="text-gray-400 text-sm">Inclusive of all Taxes.</p>
					</div>
				</div>

				<p class="text-gray-500">{{ product.description }}</p>

				<div class="flex py-4 space-x-4">
					<div class="relative">
						<div class="text-center left-0 pt-2 right-0 absolute block text-xs uppercase text-gray-400 tracking-wide font-semibold">Qty</div>
						<select class="cursor-pointer appearance-none rounded-xl border border-gray-200 pl-4 pr-8 h-14 flex items-end pb-1">
							<option>1</option>
							<option>2</option>
							<option>3</option>
							<option>4</option>
							<option>5</option>
						</select>

						<svg class="w-5 h-5 text-gray-400 absolute right-0 bottom-0 mb-2 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"/>
						</svg>
					</div>

					<a type="button" href='{{path('app_cart_add',{'id':product.id})}}' class="h-14 px-6 py-2 font-semibold rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white">
						Ajouter au panier
					</a>
				</div>
			</div>
		</div>
	</div>


	<a href="{{ path('app_product_index') }}">back to list</a>

	<a href="{{ path('app_product_edit', {'id': product.id}) }}">edit</a>

	{{ include('product/_delete_form.html.twig') }}


{% endblock %}
